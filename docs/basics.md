# Basics

## Translation Unit

It refers to the most basic unit of compilation which is a *preprocessed* source file (usually named `.cpp`). After preprocessing, the translation unit contains all the included headers, and code generated by the preprocessor directives such as `#if` and `#ifdef`.   

Example: `main.cpp`

```C++
#include <iostream>

#if 1
char globalvar{};
#endif

int main(int argc, char **argv) {
   return EXIT_SUCCESS;
}
```

After preprocessing, the translation unit will look like:
```C++
... contents for iostream header ...

char globalvar{};

int main(int argc, char **argv) {
   return EXIT_SUCCESS;
}
```

The preprocessor will include the header files (via `#include`) in a *verbatim* manner, that is, substitute the `#include` directives with the exact contents of the header files.

## One Definition Rule (ODR)

The rule ensures that every entity (classes, structs, functions and variables) must have exactly one definition across all translation units, otherwise undefined behavior might happen. This rule is closely related to the [`inline`](./keywords/inline.md) and [`static`](./keywords/static.md) keywords.

There can be multiple definitions of the same entity, but the definitions must be identical. If a function or variable is marked `inline`, the linker will eliminate all but one definition during linkage of the translation units.

Example: `header.h`
```C++
inline void perform() {
    // ...
}
```
If the header is included in multiple `.cpp` files, the `perform` function will have a definition in each `.cpp` file. Since the function is declared `inline`, the linker will eliminate every definition except for one to satisfy ODR. If it is not `inline`, the linker will complain about multiple definitions. 

## Linkage

Linkage refers to how entities (variables, functions, and classes) can be accessed from outside of the translation units in which they are defined. 
Here are the 2 most common types of linkage:

### internal linkage 

Entities with internal linkage can only be accessed within the translation units they are defined in.

Examples:
1. [`static`](./keywords/static.md) variables, functions and classes 
2. Variables, functions and classes within unnamed `namespace`s

The main benefit of internal linkage is to prevent accidental exposure of entities.

### external linkage 

By default, variables, functions and classes have external linkage, that is, they can be accessed from outside the translation units they are defined in. See [`extern`](./keywords/extern.md) for more info.


